# ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œìš” (Architecture Overview)

**Last Updated**: 2025-10-18
**Project**: GitHub Pages ëª¨ë°”ì¼ ì²­ì²©ì¥
**Status**: âœ… Design Phase

---

## ëª©ì°¨

- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°](#ì»´í¬ë„ŒíŠ¸-êµ¬ì¡°)
- [ë°ì´í„° í”Œë¡œìš°](#ë°ì´í„°-í”Œë¡œìš°)
- [í´ë” êµ¬ì¡°](#í´ë”-êµ¬ì¡°)
- [ë°°í¬ íŒŒì´í”„ë¼ì¸](#ë°°í¬-íŒŒì´í”„ë¼ì¸)

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User (Guest)                             â”‚
â”‚                     Mobile / Desktop Browser                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ HTTPS
                 â”œâ”€â”€â”€ DNS Resolution (yourusername.github.io)
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Fastly CDN (GitHub)                         â”‚
â”‚                   Global Edge Locations                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â”€ Static Assets (HTML, CSS, JS, Images)
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Pages Hosting                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Static Site (Astro Build)                  â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Hero        â”‚  â”‚ Event Info  â”‚  â”‚ Contact     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ (.astro)    â”‚  â”‚ (.astro)    â”‚  â”‚ (.astro)    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Map         â”‚  â”‚ RSVP Form   â”‚  â”‚ Gallery     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ (React)     â”‚  â”‚ (React)     â”‚  â”‚ (React)     â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                â”‚
             â”‚                â”‚ POST /exec (RSVP Data)
             â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kakao Maps API   â”‚  â”‚    Google Workspace                      â”‚
â”‚  (JavaScript SDK) â”‚  â”‚                                          â”‚
â”‚                   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  - Map Display    â”‚  â”‚  â”‚ Google Sheets                    â”‚    â”‚
â”‚  - Marker         â”‚  â”‚  â”‚ (RSVP Database)                  â”‚    â”‚
â”‚  - Info Window    â”‚  â”‚  â”‚                                  â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ [ Name | Attendance | Guests ]  â”‚    â”‚
                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                       â”‚             â”‚                            â”‚
                       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                       â”‚  â”‚ Google Apps Script              â”‚    â”‚
                       â”‚  â”‚ (Webhook Endpoint)               â”‚    â”‚
                       â”‚  â”‚                                  â”‚    â”‚
                       â”‚  â”‚ doPost() â†’ appendRow()           â”‚    â”‚
                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Architecture Principles

1. **Static-First**: ì •ì  HTML ìƒì„±ìœ¼ë¡œ ìµœëŒ€ ì„±ëŠ¥
2. **Progressive Enhancement**: JavaScript ì—†ì´ë„ ê¸°ë³¸ ì •ë³´ í™•ì¸ ê°€ëŠ¥
3. **Islands Architecture**: ì¸í„°ë™í‹°ë¸Œ ì»´í¬ë„ŒíŠ¸ë§Œ ì„ íƒì  hydration
4. **Zero Backend**: ì„œë²„ë¦¬ìŠ¤ (GitHub Pages + Google Apps Script)
5. **Mobile-First**: ë°˜ì‘í˜• ë””ìì¸, ëª¨ë°”ì¼ ìµœìš°ì„ 

---

## ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### Component Hierarchy

```
App (index.astro)
â”‚
â”œâ”€â”€ Layout.astro
â”‚   â”œâ”€â”€ SEO.astro
â”‚   â”‚   â”œâ”€â”€ OpenGraph Meta Tags
â”‚   â”‚   â””â”€â”€ Twitter Cards
â”‚   â”œâ”€â”€ Header (Navigation)
â”‚   â””â”€â”€ Footer
â”‚
â”œâ”€â”€ Hero.astro (Static)
â”‚   â”œâ”€â”€ Bride & Groom Names
â”‚   â”œâ”€â”€ Wedding Date
â”‚   â””â”€â”€ Cover Image
â”‚
â”œâ”€â”€ EventInfo.astro (Static)
â”‚   â”œâ”€â”€ Date & Time
â”‚   â”œâ”€â”€ Venue Information
â”‚   â””â”€â”€ Dress Code
â”‚
â”œâ”€â”€ Map.tsx (React Island - client:visible)
â”‚   â”œâ”€â”€ Kakao Maps SDK
â”‚   â”œâ”€â”€ Venue Marker
â”‚   â””â”€â”€ Directions Button
â”‚
â”œâ”€â”€ Contact.astro (Static)
â”‚   â”œâ”€â”€ Phone Links (tel:)
â”‚   â””â”€â”€ KakaoTalk Links
â”‚
â”œâ”€â”€ RsvpForm.tsx (React Island - client:idle)
â”‚   â”œâ”€â”€ Form Fields
â”‚   â”‚   â”œâ”€â”€ Name Input
â”‚   â”‚   â”œâ”€â”€ Attendance Radio
â”‚   â”‚   â””â”€â”€ Guests Select
â”‚   â”œâ”€â”€ Validation
â”‚   â””â”€â”€ Submit Handler
â”‚
â”œâ”€â”€ Gallery.tsx (React Island - client:visible)
â”‚   â”œâ”€â”€ Image Grid (Masonry)
â”‚   â”œâ”€â”€ Lazy Loading
â”‚   â””â”€â”€ Lightbox Modal
â”‚
â””â”€â”€ Guestbook.tsx (React Island - client:idle)
    â”œâ”€â”€ Message List
    â””â”€â”€ Message Form
```

### Component Types

#### 1. Static Components (Astro)

**íŠ¹ì§•**:
- HTMLë§Œ ì „ì†¡, JavaScript ì—†ìŒ
- ë¹Œë“œ íƒ€ì„ì— ë Œë”ë§
- ìµœê³  ì„±ëŠ¥

**ì‚¬ìš© ì˜ˆì‹œ**:
```astro
---
// src/components/Hero.astro
interface Props {
  groomName: string;
  brideName: string;
  weddingDate: string;
  coverImage: string;
}

const { groomName, brideName, weddingDate, coverImage } = Astro.props;
---

<section class="hero">
  <img src={coverImage} alt="Wedding Cover" loading="eager" />
  <h1>{groomName} & {brideName}</h1>
  <time datetime={weddingDate}>
    {new Date(weddingDate).toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })}
  </time>
</section>

<style>
  .hero {
    /* Scoped styles */
  }
</style>
```

#### 2. Interactive Components (React Islands)

**íŠ¹ì§•**:
- Reactë¡œ ì‘ì„±
- í•„ìš”í•œ ê²½ìš°ë§Œ hydration
- ìƒíƒœ ê´€ë¦¬, ì´ë²¤íŠ¸ ì²˜ë¦¬

**Hydration ì „ëµ**:

| Directive | When to Hydrate | Use Case |
|-----------|-----------------|----------|
| `client:load` | í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ | Critical ì¸í„°ë™ì…˜ |
| `client:idle` | ë¸Œë¼ìš°ì € idle ì‹œ | RSVP Form, Guestbook |
| `client:visible` | ë·°í¬íŠ¸ ì§„ì… ì‹œ | Map, Gallery |
| `client:media` | ë¯¸ë””ì–´ ì¿¼ë¦¬ ë§¤ì¹˜ ì‹œ | ë°˜ì‘í˜• ì»´í¬ë„ŒíŠ¸ |
| `client:only` | í´ë¼ì´ì–¸íŠ¸ë§Œ ë Œë” | SSR ë¶ˆê°€ëŠ¥í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ |

**ì‚¬ìš© ì˜ˆì‹œ**:
```astro
---
// src/pages/index.astro
import Map from '../components/Map.tsx';
import RsvpForm from '../components/RsvpForm.tsx';
import Gallery from '../components/Gallery.tsx';
---

<Layout>
  <!-- Static sections -->
  <Hero />
  <EventInfo />

  <!-- Interactive islands -->
  <Map
    client:visible
    lat={37.5665}
    lng={126.9780}
    venueName="ì„œìš¸ ì›¨ë”©í™€"
  />

  <RsvpForm
    client:idle
    webhookUrl={import.meta.env.PUBLIC_RSVP_WEBHOOK_URL}
  />

  <Gallery
    client:visible
    images={galleryImages}
  />
</Layout>
```

---

## ë°ì´í„° í”Œë¡œìš°

### 1. RSVP Submission Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User fills   â”‚
â”‚  RSVP Form    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RsvpForm.tsx                          â”‚
â”‚  - Validate inputs (Zod schema)        â”‚
â”‚  - Disable submit button               â”‚
â”‚  - Show loading state                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ POST /exec
         â”‚   Content-Type: application/json
         â”‚   {
         â”‚     name: "í™ê¸¸ë™",
         â”‚     attendance: "yes",
         â”‚     guests: 2,
         â”‚     message: "ì¶•í•˜í•©ë‹ˆë‹¤!"
         â”‚   }
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google Apps Script (doPost)           â”‚
â”‚  1. Parse JSON data                    â”‚
â”‚  2. Open spreadsheet                   â”‚
â”‚  3. Append row to sheet                â”‚
â”‚  4. Return success response            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google Sheets                         â”‚
â”‚                                        â”‚
â”‚  Row: [2025-10-18 10:30, í™ê¸¸ë™,       â”‚
â”‚        yes, 2, ì¶•í•˜í•©ë‹ˆë‹¤!]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ Response (200 OK)
         â”‚   { success: true }
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RsvpForm.tsx                          â”‚
â”‚  - Show success message                â”‚
â”‚  - Clear form                          â”‚
â”‚  - Re-enable submit button             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°**:

```
POST /exec fails
    â”‚
    â”œâ”€â”€ Network Error
    â”‚   â””â”€â”€ Show: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”."
    â”‚
    â”œâ”€â”€ 4xx/5xx HTTP Error
    â”‚   â””â”€â”€ Show: "ì„œë²„ ì˜¤ë¥˜. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
    â”‚
    â””â”€â”€ Timeout (> 10s)
        â””â”€â”€ Show: "ì‘ë‹µ ì‹œê°„ ì´ˆê³¼. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
```

### 2. Map Loading Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page loads        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ Map component in viewport?
         â”‚
         â”œâ”€â”€ No  â†’ Wait for scroll
         â”‚
         â””â”€â”€ Yes â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Map.tsx (client:visible triggered)  â”‚
â”‚  1. Load Kakao Maps SDK              â”‚
â”‚  2. Initialize map instance          â”‚
â”‚  3. Set center coordinates           â”‚
â”‚  4. Add venue marker                 â”‚
â”‚  5. Open info window                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kakao Maps API                      â”‚
â”‚  - Tile images                       â”‚
â”‚  - POI data                          â”‚
â”‚  - Geocoding                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Gallery Image Loading Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User scrolls down  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gallery.tsx (client:visible triggered) â”‚
â”‚  - Render image grid (Masonry)          â”‚
â”‚  - Use Intersection Observer            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€ For each image:
          â”‚
          â”œâ”€â”€ Is image in viewport?
          â”‚
          â”œâ”€â”€ No  â†’ Show blur placeholder
          â”‚
          â””â”€â”€ Yes â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lazy load actual image              â”‚
â”‚  1. Load WebP (modern browsers)      â”‚
â”‚  2. Fallback to JPEG (old browsers)  â”‚
â”‚  3. Replace placeholder              â”‚
â”‚  4. Fade-in animation                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í´ë” êµ¬ì¡°

### Project Directory Structure

```
wedding-invitation/
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ deploy.yml              # GitHub Pages ë°°í¬
â”‚       â””â”€â”€ lighthouse-ci.yml       # ì„±ëŠ¥ ì²´í¬
â”‚
â”œâ”€â”€ public/                         # Static assets (ë¹Œë“œ ì‹œ ë³µì‚¬)
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ cover.webp
â”‚   â”‚   â”œâ”€â”€ cover.jpg               # WebP fallback
â”‚   â”‚   â””â”€â”€ gallery/
â”‚   â”‚       â”œâ”€â”€ photo-01.webp
â”‚   â”‚       â”œâ”€â”€ photo-01.jpg
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”œâ”€â”€ fonts/
â”‚   â”‚   â”œâ”€â”€ cormorant-garamond.woff2
â”‚   â”‚   â””â”€â”€ noto-sans-kr.woff2
â”‚   â”œâ”€â”€ favicon.svg
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ robots.txt
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/                 # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Hero.astro              # ì •ì  ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ EventInfo.astro
â”‚   â”‚   â”œâ”€â”€ Contact.astro
â”‚   â”‚   â”œâ”€â”€ Map.tsx                 # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ RsvpForm.tsx
â”‚   â”‚   â”œâ”€â”€ Gallery.tsx
â”‚   â”‚   â””â”€â”€ Guestbook.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/                    # í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â””â”€â”€ Layout.astro            # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                      # ë¼ìš°íŠ¸ (íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…)
â”‚   â”‚   â””â”€â”€ index.astro             # ë©”ì¸ í˜ì´ì§€ (/)
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                     # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
â”‚   â”‚   â”œâ”€â”€ global.css              # ê¸€ë¡œë²Œ CSS
â”‚   â”‚   â””â”€â”€ tailwind.css            # Tailwind ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                     # ì„¤ì • íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ site.config.ts          # ì‚¬ì´íŠ¸ ì„¤ì • (ì‹ ë‘/ì‹ ë¶€ ì •ë³´)
â”‚   â”‚   â””â”€â”€ i18n.ts                 # ë‹¤êµ­ì–´ ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                      # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â”œâ”€â”€ date.ts                 # ë‚ ì§œ í¬ë§·íŒ…
â”‚   â”‚   â”œâ”€â”€ rsvp.ts                 # RSVP API í˜¸ì¶œ
â”‚   â”‚   â””â”€â”€ image.ts                # ì´ë¯¸ì§€ ìµœì í™”
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                      # TypeScript íƒ€ì…
â”‚   â”‚   â””â”€â”€ index.ts                # ê³µí†µ íƒ€ì… ì •ì˜
â”‚   â”‚
â”‚   â””â”€â”€ env.d.ts                    # Astro í™˜ê²½ ë³€ìˆ˜ íƒ€ì…
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                       # Vitest ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ date.test.ts
â”‚   â”‚   â””â”€â”€ rsvp.test.ts
â”‚   â””â”€â”€ e2e/                        # Playwright E2E í…ŒìŠ¤íŠ¸
â”‚       â”œâ”€â”€ rsvp.spec.ts
â”‚       â””â”€â”€ navigation.spec.ts
â”‚
â”œâ”€â”€ docs/                           # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ architecture/
â”‚   â”‚   â”œâ”€â”€ OVERVIEW.md             # ì´ íŒŒì¼
â”‚   â”‚   â””â”€â”€ ADR-001-astro-framework.md
â”‚   â”œâ”€â”€ design/
â”‚   â”‚   â””â”€â”€ DESIGN_SYSTEM.md
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ RSVP_API.md
â”‚   â””â”€â”€ development/
â”‚       â”œâ”€â”€ QUICK_START.md
â”‚       â””â”€â”€ DEPLOYMENT.md
â”‚
â”œâ”€â”€ astro.config.mjs                # Astro ì„¤ì •
â”œâ”€â”€ tailwind.config.cjs             # Tailwind CSS ì„¤ì •
â”œâ”€â”€ tsconfig.json                   # TypeScript ì„¤ì •
â”œâ”€â”€ biome.json                      # Biome (ë¦°í„°/í¬ë§·í„°) ì„¤ì •
â”œâ”€â”€ vitest.config.ts                # Vitest ì„¤ì •
â”œâ”€â”€ playwright.config.ts            # Playwright ì„¤ì •
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ .env.example                    # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â””â”€â”€ README.md
```

### Key Directories Explained

#### `/src/components/`

**Static Components** (.astro):
- ìˆœìˆ˜ HTML/CSSë§Œ ì‚¬ìš©
- ë¹Œë“œ íƒ€ì„ ë Œë”ë§
- Zero JavaScript
- ì˜ˆ: Hero, EventInfo, Contact

**Interactive Components** (.tsx):
- Reactë¡œ ì‘ì„±
- Islandsë¡œ hydrate
- ìƒíƒœ ê´€ë¦¬, ì´ë²¤íŠ¸ ì²˜ë¦¬
- ì˜ˆ: Map, RsvpForm, Gallery

#### `/src/pages/`

íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…:
- `index.astro` â†’ `/` (ë©”ì¸ í˜ì´ì§€)
- `404.astro` â†’ 404 í˜ì´ì§€ (ì„ íƒ)
- `about.astro` â†’ `/about` (ì„ íƒ)

#### `/src/config/`

**site.config.ts** - ì‚¬ìš©ìê°€ ìˆ˜ì •í•˜ëŠ” ìœ ì¼í•œ íŒŒì¼:
```typescript
export const siteConfig = {
  bride: {
    name: 'ê¹€ì‹ ë¶€',
    fullName: 'ê¹€ì‹ ë¶€',
    parents: {
      father: 'ê¹€ì•„ë²„ì§€',
      mother: 'ë°•ì–´ë¨¸ë‹ˆ',
    },
    contact: {
      phone: '010-1234-5678',
    },
  },
  groom: {
    name: 'ì´ì‹ ë‘',
    fullName: 'ì´ì‹ ë‘',
    parents: {
      father: 'ì´ì•„ë²„ì§€',
      mother: 'ìµœì–´ë¨¸ë‹ˆ',
    },
    contact: {
      phone: '010-9876-5432',
    },
  },
  event: {
    date: '2025-10-18T14:00:00',
    description: 'í‰ìƒì„ í•¨ê»˜í•  ë‘ ì‚¬ëŒì˜ ì²« ê±¸ìŒì— ì°¸ì„í•´ì£¼ì„¸ìš”.',
  },
  venue: {
    name: 'ì„œìš¸ ì›¨ë”©í™€',
    address: 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123',
    floor: '3ì¸µ',
    hall: 'ê·¸ëœë“œë³¼ë£¸',
    coordinates: {
      lat: 37.5665,
      lng: 126.9780,
    },
  },
};
```

#### `/public/`

ë¹Œë“œ ì‹œ ê·¸ëŒ€ë¡œ ë³µì‚¬ë˜ëŠ” ì •ì  íŒŒì¼:
- ì´ë¯¸ì§€: WebP + JPEG fallback
- í°íŠ¸: WOFF2 í¬ë§· (ìµœê³  ì••ì¶•ë¥ )
- favicon, robots.txt

---

## ë°°í¬ íŒŒì´í”„ë¼ì¸

### CI/CD Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer       â”‚
â”‚  git push main   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions Triggered                   â”‚
â”‚  (.github/workflows/deploy.yml)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ 1. Checkout code
         â”œâ”€â”€ 2. Setup Node.js 22
         â”œâ”€â”€ 3. Install pnpm
         â”œâ”€â”€ 4. Install dependencies (pnpm install)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Job                                  â”‚
â”‚  pnpm build                                 â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Astro Build Process                   â”‚ â”‚
â”‚  â”‚ 1. Compile .astro files â†’ HTML       â”‚ â”‚
â”‚  â”‚ 2. Bundle React components            â”‚ â”‚
â”‚  â”‚ 3. Process Tailwind CSS               â”‚ â”‚
â”‚  â”‚ 4. Optimize images (Sharp)            â”‚ â”‚
â”‚  â”‚ 5. Minify HTML/CSS/JS                 â”‚ â”‚
â”‚  â”‚ 6. Generate static assets             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  Output: /dist/ folder                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ 5. Upload Pages artifact
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Deploy Job                                 â”‚
â”‚  actions/deploy-pages@v4                    â”‚
â”‚                                             â”‚
â”‚  1. Download artifact                       â”‚
â”‚  2. Deploy to GitHub Pages                  â”‚
â”‚  3. Purge CDN cache                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Production                                 â”‚
â”‚  https://yourusername.github.io/            â”‚
â”‚         wedding-invitation                  â”‚
â”‚                                             â”‚
â”‚  - Served by Fastly CDN                     â”‚
â”‚  - HTTPS enabled                            â”‚
â”‚  - Global edge locations                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Performance Checks (Lighthouse CI)

```
Pull Request created
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lighthouse CI Workflow                 â”‚
â”‚  (.github/workflows/lighthouse-ci.yml)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ 1. Build site
         â”œâ”€â”€ 2. Run Lighthouse
         â”‚      - Performance
         â”‚      - Accessibility
         â”‚      - Best Practices
         â”‚      - SEO
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Assertions                              â”‚
â”‚  - Performance > 90  âœ…/âŒ               â”‚
â”‚  - Accessibility > 90  âœ…/âŒ             â”‚
â”‚  - Best Practices > 90  âœ…/âŒ            â”‚
â”‚  - SEO > 90  âœ…/âŒ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ Pass â†’ Merge allowed
         â””â”€â”€ Fail â†’ Block merge, show report
```

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. Content Security Policy (CSP)

```html
<!-- src/layouts/Layout.astro -->
<meta
  http-equiv="Content-Security-Policy"
  content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://dapi.kakao.com https://script.google.com;
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: https:;
    font-src 'self';
    connect-src 'self' https://script.google.com;
  "
/>
```

### 2. XSS ë°©ì§€

- ReactëŠ” ê¸°ë³¸ì ìœ¼ë¡œ XSS ë°©ì§€ (ìë™ escape)
- `dangerouslySetInnerHTML` ì‚¬ìš© ê¸ˆì§€
- ì‚¬ìš©ì ì…ë ¥ ê²€ì¦ (Zod schema)

### 3. HTTPS Enforced

- GitHub PagesëŠ” HTTPS ê¸°ë³¸ ì œê³µ
- HTTP â†’ HTTPS ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸

### 4. í™˜ê²½ ë³€ìˆ˜ ë³´í˜¸

- API í‚¤ëŠ” GitHub Secretsì— ì €ì¥
- `.env` íŒŒì¼ì€ `.gitignore`ì— í¬í•¨
- `PUBLIC_` prefixë¡œ í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ ë³€ìˆ˜ ëª…ì‹œ

---

## í™•ì¥ ê³„íš

### Phase 2 (Sprint 2)

- ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥ ì¶”ê°€
- í…Œë§ˆ ì‹œìŠ¤í…œ (3ê°€ì§€ ì»¬ëŸ¬ í…Œë§ˆ)
- ë‹¤êµ­ì–´ ì§€ì› (í•œ/ì˜)
- ë°©ëª…ë¡ ê¸°ëŠ¥

### Phase 3 (Sprint 3)

- PWA ì§€ì› (Manifest, Service Worker)
- ì˜¤í”„ë¼ì¸ ëª¨ë“œ
- ìº˜ë¦°ë” ì—°ë™ (Add to Calendar)
- ì†Œì…œ ê³µìœ  ìµœì í™”

### ì¥ê¸° ê³„íš

- ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¬ë° ì„ë² ë“œ
- ì‹¤ì‹œê°„ RSVP ì¹´ìš´íŠ¸
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (RSVP í†µê³„)

---

## ì°¸ê³  ë¬¸ì„œ

- [Astro Islands Architecture](https://docs.astro.build/en/concepts/islands/)
- [React 18 Server Components](https://react.dev/blog/2022/03/29/react-v18)
- [Tailwind CSS Architecture](https://tailwindcss.com/docs/reusing-styles)
- [Google Apps Script Best Practices](https://developers.google.com/apps-script/guides/services/quotas)

---

**Last Updated**: 2025-10-18
**Next Review**: Sprint 1 ì¢…ë£Œ ì‹œ (2025-11-03 ì˜ˆì •)
**Document Owner**: Technical Architect

---

**Navigation**: [â† TECH_STACK](../TECH_STACK.md) | [ADR-001 â†’](ADR-001-astro-framework.md) | [DESIGN_SYSTEM â†’](../design/DESIGN_SYSTEM.md)
